<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moja Static Web App</title>
</head>
<body>
  <h1>Witaj w mojej statycznej aplikacji!</h1>
  <p>To jest przykładowa strona statyczna z funkcją API obsługującą telemetrykę Application Insights.</p>

  <!-- Przykładowy skrypt Application Insights -->
  <script type="text/javascript">
    var appInsights = window.appInsights || function(config) {
      function r(config) { t[config] = function(){ var i = arguments; t.queue.push(function(){ t[config].apply(t,i) }) } }
      var t = { config: config }, u = document, e = window, o = "script", s = u.createElement(o);
      s.src = config.src || "https://js.monitor.azure.com/scripts/b/ai.2.min.js";
      u.getElementsByTagName(o)[0].parentNode.appendChild(s);
      t.queue = [];
      var f = ["trackEvent","trackPageView","trackException","trackTrace","trackDependencyData","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"];
      while(f.length) { r(f.pop()); }
      if (!config.disableExceptionTracking) {
        var originalOnError = e.onerror;
        e.onerror = function(message, url, lineNumber, columnNumber, errorObj) {
          var event = {
            message: message,
            url: url,
            line: lineNumber,
            column: columnNumber,
            error: errorObj
          };
          t.trackException({exception: event});
          if (originalOnError) {
            return originalOnError(message, url, lineNumber, columnNumber, errorObj);
          }
        };
      }
      return t;
    }({
      instrumentationKey: "TWÓJ_INSTRUMENTATION_KEY",  // <- Podmień na swój klucz
        src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js"
    });
    window.appInsights = appInsights;
    appInsights.trackPageView();
  </script>

  <!-- Przykładowy przycisk wywołujący funkcję API -->
  <button onclick="callApi()">Wywołaj API</button>
  <p id="response"></p>
  <script>
    function callApi() {
      fetch('/api/hello')
        .then(response => response.text())
        .then(data => {
          document.getElementById('response').innerText = data;
        })
        .catch(error => {
          document.getElementById('response').innerText = 'Błąd: ' + error;
        });
    }
  </script>
</body>
</html>
